{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"kslwqCIsh6ew+I1KeA1rlVRjsAk=","exportNames":["*"]}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"yg7e6laZwmpbIvId5jovq9ugXp8=","exportNames":["*"]}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"Z6pzkVZ2fvxBLkFTgVVOy4UDj30=","exportNames":["*"]}},{"name":"react-native","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":1},"end":{"line":2,"column":87,"index":88}}],"key":"KyzuX10g6ixS9UfynhmjlvCIG3g=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = void 0;\n  var _classCallCheck2 = _interopRequireDefault(require(_dependencyMap[1], \"@babel/runtime/helpers/classCallCheck\"));\n  var _createClass2 = _interopRequireDefault(require(_dependencyMap[2], \"@babel/runtime/helpers/createClass\"));\n  var _reactNative = require(_dependencyMap[3], \"react-native\");\n  var WebRTCModule = _reactNative.NativeModules.WebRTCModule;\n\n  /**\n   * Type declaration for a permissions descriptor.\n   */\n  /**\n   * Class implementing a subset of W3C's Permissions API as defined by:\n   * https://www.w3.org/TR/permissions/\n   */\n  var Permissions = /*#__PURE__*/function () {\n    function Permissions() {\n      (0, _classCallCheck2.default)(this, Permissions);\n      /**\n       * Possible result values for {@link query}, in accordance with:\n       * https://www.w3.org/TR/permissions/#status-of-a-permission\n       */\n      this.RESULT = {\n        DENIED: 'denied',\n        GRANTED: 'granted',\n        PROMPT: 'prompt'\n      };\n      /**\n       * This implementation only supports requesting these permissions, a subset\n       * of: https://www.w3.org/TR/permissions/#permission-registry\n       */\n      this.VALID_PERMISSIONS = ['camera', 'microphone'];\n      this._lastReq = Promise.resolve();\n    }\n    return (0, _createClass2.default)(Permissions, [{\n      key: \"_requestPermissionAndroid\",\n      value:\n      /**\n       * Helper for requesting Android permissions. On Android only one permission\n       * can be requested at a time (unless the multi-permission API is used,\n       * but we are not using that for symmetry with the W3C API for querying)\n       * so we'll queue them up.\n       *\n       * @param perm - The requested permission from\n       * {@link PermissionsAndroid.PERMISSIONS}\n       * https://facebook.github.io/react-native/docs/permissionsandroid#permissions-that-require-prompting-the-user\n       */\n      function _requestPermissionAndroid(perm) {\n        return new Promise(resolve => {\n          _reactNative.PermissionsAndroid.request(perm).then(granted => resolve(granted === _reactNative.PermissionsAndroid.RESULTS.GRANTED), () => resolve(false));\n        });\n      }\n\n      /**\n       * Validates the given permission descriptor.\n       */\n    }, {\n      key: \"_validatePermissionDescriptior\",\n      value: function _validatePermissionDescriptior(permissionDesc) {\n        if (typeof permissionDesc !== 'object') {\n          throw new TypeError('Argument 1 of Permissions.query is not an object.');\n        }\n        if (typeof permissionDesc.name === 'undefined') {\n          throw new TypeError('Missing required \\'name\\' member of PermissionDescriptor.');\n        }\n        if (this.VALID_PERMISSIONS.indexOf(permissionDesc.name) === -1) {\n          throw new TypeError('\\'name\\' member of PermissionDescriptor is not a valid value for enumeration PermissionName.');\n        }\n      }\n\n      /**\n       * Method for querying the status of a permission, according to:\n       * https://www.w3.org/TR/permissions/#permissions-interface\n       */\n    }, {\n      key: \"query\",\n      value: function query(permissionDesc) {\n        try {\n          this._validatePermissionDescriptior(permissionDesc);\n        } catch (e) {\n          return Promise.reject(e);\n        }\n        if (_reactNative.Platform.OS === 'android') {\n          var perm = permissionDesc.name === 'camera' ? _reactNative.PermissionsAndroid.PERMISSIONS.CAMERA : _reactNative.PermissionsAndroid.PERMISSIONS.RECORD_AUDIO;\n          return new Promise(resolve => {\n            _reactNative.PermissionsAndroid.check(perm).then(granted => resolve(granted ? this.RESULT.GRANTED : this.RESULT.PROMPT), () => resolve(this.RESULT.PROMPT));\n          });\n        } else if (_reactNative.Platform.OS === 'ios' || _reactNative.Platform.OS === 'macos') {\n          return WebRTCModule.checkPermission(permissionDesc.name);\n        } else {\n          return Promise.reject(new TypeError('Unsupported platform.'));\n        }\n      }\n\n      /**\n       * Custom method NOT defined by W3C's permissions API, which allows the\n       * caller to request a permission.\n       */\n    }, {\n      key: \"request\",\n      value: function request(permissionDesc) {\n        try {\n          this._validatePermissionDescriptior(permissionDesc);\n        } catch (e) {\n          return Promise.reject(e);\n        }\n        if (_reactNative.Platform.OS === 'android') {\n          var perm = permissionDesc.name === 'camera' ? _reactNative.PermissionsAndroid.PERMISSIONS.CAMERA : _reactNative.PermissionsAndroid.PERMISSIONS.RECORD_AUDIO;\n          var requestPermission = () => this._requestPermissionAndroid(perm);\n          this._lastReq = this._lastReq.then(requestPermission, requestPermission);\n          return this._lastReq;\n        } else if (_reactNative.Platform.OS === 'ios' || _reactNative.Platform.OS === 'macos') {\n          return WebRTCModule.requestPermission(permissionDesc.name);\n        } else {\n          return Promise.reject(new TypeError('Unsupported platform.'));\n        }\n      }\n    }]);\n  }();\n  var _default = exports.default = new Permissions();\n});","lineCount":124,"map":[[9,2,2,0],[9,6,2,0,"_reactNative"],[9,18,2,0],[9,21,2,0,"require"],[9,28,2,0],[9,29,2,0,"_dependencyMap"],[9,43,2,0],[10,2,4,0],[10,6,4,8,"WebRTCModule"],[10,18,4,20],[10,21,4,25,"NativeModules"],[10,47,4,38],[10,48,4,8,"WebRTCModule"],[10,60,4,20],[12,2,6,0],[13,0,7,0],[14,0,8,0],[15,2,13,0],[16,0,14,0],[17,0,15,0],[18,0,16,0],[19,2,13,0],[19,6,17,6,"Permissions"],[19,17,17,17],[20,4,17,17],[20,13,17,17,"Permissions"],[20,25,17,17],[21,6,17,17],[21,10,17,17,"_classCallCheck2"],[21,26,17,17],[21,27,17,17,"default"],[21,34,17,17],[21,42,17,17,"Permissions"],[21,53,17,17],[22,6,18,4],[23,0,19,0],[24,0,20,0],[25,0,21,0],[26,6,18,4],[26,11,22,4,"RESULT"],[26,17,22,10],[26,20,22,13],[27,8,23,8,"DENIED"],[27,14,23,14],[27,16,23,16],[27,24,23,24],[28,8,24,8,"GRANTED"],[28,15,24,15],[28,17,24,17],[28,26,24,26],[29,8,25,8,"PROMPT"],[29,14,25,14],[29,16,25,16],[30,6,26,4],[30,7,26,5],[31,6,28,4],[32,0,29,0],[33,0,30,0],[34,0,31,0],[35,6,28,4],[35,11,32,4,"VALID_PERMISSIONS"],[35,28,32,21],[35,31,32,24],[35,32,32,26],[35,40,32,34],[35,42,32,36],[35,54,32,48],[35,55,32,50],[36,6,32,50],[36,11,34,4,"_lastReq"],[36,19,34,12],[36,22,34,33,"Promise"],[36,29,34,40],[36,30,34,41,"resolve"],[36,37,34,48],[36,38,34,49],[36,39,34,50],[37,4,34,50],[38,4,34,50],[38,15,34,50,"_createClass2"],[38,28,34,50],[38,29,34,50,"default"],[38,36,34,50],[38,38,34,50,"Permissions"],[38,49,34,50],[39,6,34,50,"key"],[39,9,34,50],[40,6,34,50,"value"],[40,11,34,50],[41,6,36,4],[42,0,37,0],[43,0,38,0],[44,0,39,0],[45,0,40,0],[46,0,41,0],[47,0,42,0],[48,0,43,0],[49,0,44,0],[50,0,45,0],[51,6,46,4],[51,15,46,4,"_requestPermissionAndroid"],[51,40,46,29,"_requestPermissionAndroid"],[51,41,46,30,"perm"],[51,45,46,46],[51,47,46,48],[52,8,47,8],[52,15,47,15],[52,19,47,19,"Promise"],[52,26,47,26],[52,27,47,27,"resolve"],[52,34,47,34],[52,38,47,38],[53,10,48,12,"PermissionsAndroid"],[53,41,48,30],[53,42,48,31,"request"],[53,49,48,38],[53,50,48,39,"perm"],[53,54,48,43],[53,55,48,44],[53,56,48,45,"then"],[53,60,48,49],[53,61,49,16,"granted"],[53,68,49,23],[53,72,49,27,"resolve"],[53,79,49,34],[53,80,49,35,"granted"],[53,87,49,42],[53,92,49,47,"PermissionsAndroid"],[53,123,49,65],[53,124,49,66,"RESULTS"],[53,131,49,73],[53,132,49,74,"GRANTED"],[53,139,49,81],[53,140,49,82],[53,142,50,16],[53,148,50,22,"resolve"],[53,155,50,29],[53,156,50,30],[53,161,50,35],[53,162,51,12],[53,163,51,13],[54,8,52,8],[54,9,52,9],[54,10,52,10],[55,6,53,4],[57,6,55,4],[58,0,56,0],[59,0,57,0],[60,4,55,4],[61,6,55,4,"key"],[61,9,55,4],[62,6,55,4,"value"],[62,11,55,4],[62,13,58,4],[62,22,58,4,"_validatePermissionDescriptior"],[62,52,58,34,"_validatePermissionDescriptior"],[62,53,58,35,"permissionDesc"],[62,67,58,49],[62,69,58,51],[63,8,59,8],[63,12,59,12],[63,19,59,19,"permissionDesc"],[63,33,59,33],[63,38,59,38],[63,46,59,46],[63,48,59,48],[64,10,60,12],[64,16,60,18],[64,20,60,22,"TypeError"],[64,29,60,31],[64,30,60,32],[64,81,60,83],[64,82,60,84],[65,8,61,8],[66,8,63,8],[66,12,63,12],[66,19,63,19,"permissionDesc"],[66,33,63,33],[66,34,63,34,"name"],[66,38,63,38],[66,43,63,43],[66,54,63,54],[66,56,63,56],[67,10,64,12],[67,16,64,18],[67,20,64,22,"TypeError"],[67,29,64,31],[67,30,64,32],[67,89,64,91],[67,90,64,92],[68,8,65,8],[69,8,67,8],[69,12,67,12],[69,16,67,16],[69,17,67,17,"VALID_PERMISSIONS"],[69,34,67,34],[69,35,67,35,"indexOf"],[69,42,67,42],[69,43,67,43,"permissionDesc"],[69,57,67,57],[69,58,67,58,"name"],[69,62,67,62],[69,63,67,63],[69,68,67,68],[69,69,67,69],[69,70,67,70],[69,72,67,72],[70,10,68,12],[70,16,68,18],[70,20,68,22,"TypeError"],[70,29,68,31],[70,30,69,16],[70,124,70,12],[70,125,70,13],[71,8,71,8],[72,6,72,4],[74,6,74,4],[75,0,75,0],[76,0,76,0],[77,0,77,0],[78,4,74,4],[79,6,74,4,"key"],[79,9,74,4],[80,6,74,4,"value"],[80,11,74,4],[80,13,78,4],[80,22,78,4,"query"],[80,27,78,9,"query"],[80,28,78,10,"permissionDesc"],[80,42,78,46],[80,44,78,48],[81,8,79,8],[81,12,79,12],[82,10,80,12],[82,14,80,16],[82,15,80,17,"_validatePermissionDescriptior"],[82,45,80,47],[82,46,80,48,"permissionDesc"],[82,60,80,62],[82,61,80,63],[83,8,81,8],[83,9,81,9],[83,10,81,10],[83,17,81,17,"e"],[83,18,81,18],[83,20,81,20],[84,10,82,12],[84,17,82,19,"Promise"],[84,24,82,26],[84,25,82,27,"reject"],[84,31,82,33],[84,32,82,34,"e"],[84,33,82,35],[84,34,82,36],[85,8,83,8],[86,8,85,8],[86,12,85,12,"Platform"],[86,33,85,20],[86,34,85,21,"OS"],[86,36,85,23],[86,41,85,28],[86,50,85,37],[86,52,85,39],[87,10,86,12],[87,14,86,18,"perm"],[87,18,86,22],[87,21,87,16,"permissionDesc"],[87,35,87,30],[87,36,87,31,"name"],[87,40,87,35],[87,45,87,40],[87,53,87,48],[87,56,88,22,"PermissionsAndroid"],[87,87,88,40],[87,88,88,41,"PERMISSIONS"],[87,99,88,52],[87,100,88,53,"CAMERA"],[87,106,88,59],[87,109,89,22,"PermissionsAndroid"],[87,140,89,40],[87,141,89,41,"PERMISSIONS"],[87,152,89,52],[87,153,89,53,"RECORD_AUDIO"],[87,165,89,65],[88,10,91,12],[88,17,91,19],[88,21,91,23,"Promise"],[88,28,91,30],[88,29,91,31,"resolve"],[88,36,91,38],[88,40,91,42],[89,12,92,16,"PermissionsAndroid"],[89,43,92,34],[89,44,92,35,"check"],[89,49,92,40],[89,50,92,41,"perm"],[89,54,92,45],[89,55,92,46],[89,56,92,47,"then"],[89,60,92,51],[89,61,93,20,"granted"],[89,68,93,27],[89,72,93,31,"resolve"],[89,79,93,38],[89,80,93,39,"granted"],[89,87,93,46],[89,90,93,49],[89,94,93,53],[89,95,93,54,"RESULT"],[89,101,93,60],[89,102,93,61,"GRANTED"],[89,109,93,68],[89,112,93,71],[89,116,93,75],[89,117,93,76,"RESULT"],[89,123,93,82],[89,124,93,83,"PROMPT"],[89,130,93,89],[89,131,93,90],[89,133,94,20],[89,139,94,26,"resolve"],[89,146,94,33],[89,147,94,34],[89,151,94,38],[89,152,94,39,"RESULT"],[89,158,94,45],[89,159,94,46,"PROMPT"],[89,165,94,52],[89,166,95,16],[89,167,95,17],[90,10,96,12],[90,11,96,13],[90,12,96,14],[91,8,97,8],[91,9,97,9],[91,15,97,15],[91,19,97,19,"Platform"],[91,40,97,27],[91,41,97,28,"OS"],[91,43,97,30],[91,48,97,35],[91,53,97,40],[91,57,97,44,"Platform"],[91,78,97,52],[91,79,97,53,"OS"],[91,81,97,55],[91,86,97,60],[91,93,97,67],[91,95,97,69],[92,10,98,12],[92,17,98,19,"WebRTCModule"],[92,29,98,31],[92,30,98,32,"checkPermission"],[92,45,98,47],[92,46,98,48,"permissionDesc"],[92,60,98,62],[92,61,98,63,"name"],[92,65,98,67],[92,66,98,68],[93,8,99,8],[93,9,99,9],[93,15,99,15],[94,10,100,12],[94,17,100,19,"Promise"],[94,24,100,26],[94,25,100,27,"reject"],[94,31,100,33],[94,32,100,34],[94,36,100,38,"TypeError"],[94,45,100,47],[94,46,100,48],[94,69,100,71],[94,70,100,72],[94,71,100,73],[95,8,101,8],[96,6,102,4],[98,6,104,4],[99,0,105,0],[100,0,106,0],[101,0,107,0],[102,4,104,4],[103,6,104,4,"key"],[103,9,104,4],[104,6,104,4,"value"],[104,11,104,4],[104,13,108,4],[104,22,108,4,"request"],[104,29,108,11,"request"],[104,30,108,12,"permissionDesc"],[104,44,108,48],[104,46,108,50],[105,8,109,8],[105,12,109,12],[106,10,110,12],[106,14,110,16],[106,15,110,17,"_validatePermissionDescriptior"],[106,45,110,47],[106,46,110,48,"permissionDesc"],[106,60,110,62],[106,61,110,63],[107,8,111,8],[107,9,111,9],[107,10,111,10],[107,17,111,17,"e"],[107,18,111,18],[107,20,111,20],[108,10,112,12],[108,17,112,19,"Promise"],[108,24,112,26],[108,25,112,27,"reject"],[108,31,112,33],[108,32,112,34,"e"],[108,33,112,35],[108,34,112,36],[109,8,113,8],[110,8,115,8],[110,12,115,12,"Platform"],[110,33,115,20],[110,34,115,21,"OS"],[110,36,115,23],[110,41,115,28],[110,50,115,37],[110,52,115,39],[111,10,116,12],[111,14,116,18,"perm"],[111,18,116,22],[111,21,117,16,"permissionDesc"],[111,35,117,30],[111,36,117,31,"name"],[111,40,117,35],[111,45,117,40],[111,53,117,48],[111,56,118,22,"PermissionsAndroid"],[111,87,118,40],[111,88,118,41,"PERMISSIONS"],[111,99,118,52],[111,100,118,53,"CAMERA"],[111,106,118,59],[111,109,119,22,"PermissionsAndroid"],[111,140,119,40],[111,141,119,41,"PERMISSIONS"],[111,152,119,52],[111,153,119,53,"RECORD_AUDIO"],[111,165,119,65],[112,10,120,12],[112,14,120,18,"requestPermission"],[112,31,120,35],[112,34,120,38,"requestPermission"],[112,35,120,38],[112,40,120,44],[112,44,120,48],[112,45,120,49,"_requestPermissionAndroid"],[112,70,120,74],[112,71,120,75,"perm"],[112,75,120,79],[112,76,120,80],[113,10,122,12],[113,14,122,16],[113,15,122,17,"_lastReq"],[113,23,122,25],[113,26,122,28],[113,30,122,32],[113,31,122,33,"_lastReq"],[113,39,122,41],[113,40,122,42,"then"],[113,44,122,46],[113,45,122,47,"requestPermission"],[113,62,122,64],[113,64,122,66,"requestPermission"],[113,81,122,83],[113,82,122,84],[114,10,124,12],[114,17,124,19],[114,21,124,23],[114,22,124,24,"_lastReq"],[114,30,124,32],[115,8,125,8],[115,9,125,9],[115,15,125,15],[115,19,125,19,"Platform"],[115,40,125,27],[115,41,125,28,"OS"],[115,43,125,30],[115,48,125,35],[115,53,125,40],[115,57,125,44,"Platform"],[115,78,125,52],[115,79,125,53,"OS"],[115,81,125,55],[115,86,125,60],[115,93,125,67],[115,95,125,69],[116,10,126,12],[116,17,126,19,"WebRTCModule"],[116,29,126,31],[116,30,126,32,"requestPermission"],[116,47,126,49],[116,48,126,50,"permissionDesc"],[116,62,126,64],[116,63,126,65,"name"],[116,67,126,69],[116,68,126,70],[117,8,127,8],[117,9,127,9],[117,15,127,15],[118,10,128,12],[118,17,128,19,"Promise"],[118,24,128,26],[118,25,128,27,"reject"],[118,31,128,33],[118,32,128,34],[118,36,128,38,"TypeError"],[118,45,128,47],[118,46,128,48],[118,69,128,71],[118,70,128,72],[118,71,128,73],[119,8,129,8],[120,6,130,4],[121,4,130,5],[122,2,130,5],[123,2,130,5],[123,6,130,5,"_default"],[123,14,130,5],[123,17,130,5,"exports"],[123,24,130,5],[123,25,130,5,"default"],[123,32,130,5],[123,35,133,15],[123,39,133,19,"Permissions"],[123,50,133,30],[123,51,133,31],[123,52,133,32],[124,0,133,32],[124,3]],"functionMap":{"names":["<global>","Permissions","_requestPermissionAndroid","Promise$argument_0","PermissionsAndroid.request.then$argument_0","PermissionsAndroid.request.then$argument_1","_validatePermissionDescriptior","query","PermissionsAndroid.check.then$argument_0","PermissionsAndroid.check.then$argument_1","request","requestPermission"],"mappings":"AAA;ACgB;IC6B;2BCC;gBCE,kED;gBEC,oBF;SDE;KDC;IKK;KLc;IMM;+BJa;oBKE,sEL;oBMC,iCN;aIE;KNM;ISM;sCCY,0CD;KTU;CDC"}},"type":"js/module"}]}